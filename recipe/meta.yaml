{% set name = "arize" %}
{% set version = "8.0.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/arize-{{ version }}.tar.gz
  sha256: 3561ab9baf3ea9ed0f190969c70e233ebbeff9e4f66f8aa652ad2c5b86199b4f

build:
  number: 0
  noarch: python

requirements:
  host:
    - python {{ python_min }}
    - hatchling
    - pip
  run:
    - python >={{ python_min }}

outputs:
  - name: {{ name|lower }}
    build:
      script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
        - hatchling
        - pip
      run:
        - python >={{ python_min }}
        - numpy >=2.0.0
        - openinference-semantic-conventions >=0.1.25,<1
        - opentelemetry-exporter-otlp-proto-common >=1.38.0
        - opentelemetry-exporter-otlp-proto-grpc >=1.38.0
        - opentelemetry-sdk >=1.38.0
        - opentelemetry-semantic-conventions >=0.43b0,<1
        - pandas >=2.0.0,<3
        - protobuf >=4.21.0,<7
        - pyarrow >=0.15.0
        - pydantic >=2,<3
        - python-dateutil >=2.8.2,<3
        - requests >=2.0.0,<3
        # - requests_futures >=1.0.0,<2  # Doesn't exist on conda-forge
        - tqdm >4,<5                                       # For progress bars
        - typing-extensions >=4.7.1,<5
        - urllib3 >=2.1.0,<3
        - wrapt >=1.0.0,<2.0.0
    test:
      imports:
        - arize
      requires:
        - python {{ python_min }}

  - name: {{ name|lower }}-with-embeddings
    build:
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }}
        - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
        - datasets !=2.14.*,<3,>=2.8
        - pillow <11,>=8.4.0
        - tokenizers <1,>=0.13
        - torch <3,>=1.13
        - transformers <5,>=4.25
    test:
      imports:
        - arize
        - arize.embeddings
        - arize.embeddings.base_generators
      requires:
        - python {{ python_min }}

  - name: {{ name|lower }}-with-mimic
    build:
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }}
        - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
        - interpret-community <1,>=0.22.0
        - lightgbm
    test:
      imports:
        - arize
        - arize.ml.surrogate_explainer.mimic
      requires:
        - python {{ python_min }}

  # - name: {{ name|lower }}-with-otel
  #   build:
  #     number: 0
  #     noarch: python
  #   requirements:
  #     host:
  #       - python {{ python_min }}
  #     run:
  #       - python >={{ python_min }}
  #       - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
  #       - arize-otel <1,>=0.11.0  # Not on conda-forge; extra=otel
  #   test:
  #     imports:
  #       - arize
  #       - arize.otel
  #     requires:
  #       - python {{ python_min }}

about:
  home: https://github.com/Arize-ai/client_python
  summary: A helper library to interact with Arize AI APIs
  dev_url: https://github.com/Arize-ai/client_python
  license: BSD-3-Clause
  license_file: LICENSE.md

extra:
  recipe-maintainers:
    - zephyap
  feedstock-name: {{ name|lower }}
